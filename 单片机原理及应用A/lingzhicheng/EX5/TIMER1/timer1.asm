//P0用杜邦线接到静态数码管JP3
	ORG		0000H
RESET:
	LJMP	MAIN
	ORG		001BH;定时器中断1入口
	LJMP	T1_INT
	ORG		0100H
	
MAIN:
	MOV		SP,#60H
	MOV		DPTR,#TABLE
	MOV		TMOD,#10H;计时工作方式1
	MOV		P0,#0FFH
	MOV		R0,#00H
	MOV		30H,#00H;定时器超时一百次，达到64h即一秒
	;12MHz，机器周期1μs，需要10000个计数，初值=65536-10000=55536=D8F0H
	MOV		TH1,#0D8H
	MOV		TL1,#0F0H
	SETB	ET1;开放T1中断和总中断
	SETB	EA
	SETB	TR1;启动T1
	JNB		TF1,$;wait for TF1

T1_INT:
	PUSH	PSW;保护状态字寄存器
	PUSH	ACC
	CLR		EA;关闭总中断
	MOV		TH1,#0D8H
	MOV		TL1,#0F0H
	INC		30H
	MOV		A,30H	
	CJNE	A,#100,CONTINUE_T0
	MOV		A,R0
	MOVC	A,@A+DPTR
	CJNE	A,#0FFH,SHOW
	MOV		R0,#00H

SHOW:
	MOV		P0,A
	INC		R0
	SETB	EA;开总中断
	POP		ACC
	POP		PSW;保护状态字寄存器
	RETI

CONTINUE_T0:
	SETB	EA;开总中断
	POP		ACC
	POP		PSW;保护状态字寄存器
	RETI
	
TABLE:	
	DB 		0C0H,0F9H,0A4H,0B0H,99H,92H,82H,0F8H
	DB		80H,90H,88H,83H,0C6H,0A1H,86H,8EH
	DB		0FFH

	END
	