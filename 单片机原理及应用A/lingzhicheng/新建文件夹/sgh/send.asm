		ORG 0000h
		LJMP MAIN
		ORG 0100H
MAIN:  	MOV	SP,#60H	
		MOV TMOD,#20H
		MOV TH1,#0F4H
		MOV TL1,#0F4H
	   	MOV PCON,#80H
		SETB TR1
		MOV SCON,#50H
		MOV R0,#30H
		MOV R7,#08H
		MOV R6,#00H

SEND:	MOV A,#06H
		MOV SBUF,A
WAIT4:	JNB TI,WAIT4
		CLR TI
		
REC:	JNB RI,REC
		CLR RI
		MOV A,SBUF
		CJNE A,#00H,SEND
	
	   
	
SEND1:	MOV A,R7
		MOV SBUF,A
		ADD A,R6
		MOV R6,A	
WAIT1:	JNB TI,WAIT1
		CLR	TI
SEND2:	MOV A,@R0
		MOV SBUF,A
WAIT2:	JNB TI,WAIT2
		CLR TI
		ADD A,R6
		MOV R6,A
		INC R0
		DJNZ R7,SEND2
		MOV A,R6
		MOV SBUF,A
WAIT3:	JNB TI,WAIT3
		CLR TI

REC2: 	JNB RI,REC2
		CLR RI
		MOV A,SBUF
		CJNE A,#0FH,SEND
		MOV 40H,#0FFH

		LJMP $

END